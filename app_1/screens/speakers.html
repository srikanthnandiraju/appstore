<style>
    #speakers-screen-wrapper {
        position: absolute;
        margin: 0px;
        /* border: 2px solid red; */
        top: 0px;
        left: 0px;
        bottom: 0px;
        right: 0px;
        overflow: hidden;
    }

    .days-menu {
        position: absolute;
        top: 0px;
        left: 0px;
        background: white !important;
    }

    #speakers-list-wrapper {
        position: absolute;
        top: 40px;
        left: 0px;
        bottom: 2px;
        right: 0px;
        padding: 10px;
        overflow: hidden;
        overflow-y: scroll;
        -webkit-overflow-scrolling: touch;
    }
</style>
<div id="speakers-screen-wrapper">
    <div class="ui blue secondary pointing two item menu fluid blue borderless days-menu">
        <a class="active item event-date" data-day="1">
            September 12th
        </a>
        <a class="item event-date day-2" data-day="2">
            September 13th
        </a>
    </div>
    <div id="speakers-list-wrapper">
        <div class="ui container" id="speaker-list-view">

        </div>
    </div>
</div>
<template id="one-speaker-template">
    {{#speakers}}
    <br>
    <span class="ui label orange">
        <i class="time icon outline"></i>{{time}}</span>
    <div class="ui fluid card" style="margin-bottom:15px;border-radius:10px;box-shadow:0px 6px 12px rgba(0,0,0,0.12);">
        <div class="content">
            <div class="header">{{item}}
            </div>
            <div class="meta">
                <span>{{location}}</span>
            </div>

            <div class="description">
                {{description}}
            </div>
        </div>

        <div class="extra content">
            <span class="right floated">
                <i class="microphone icon"></i>{{pocforcontent}}</span>
        </div>
    </div>
    {{/speakers}}
</template>


<script>
    function renderSpeakers(speakerData) {
        let template = $('#one-speaker-template').html();
        let html = Mustache.to_html(template, {
            speakers: speakerData
        });
        return html;
    }

    function renderSpeakersByDay(selectedDay) {
        App.Speakers.splitSpeakersByDay();
        if (selectedDay == "2") {
            var html = renderSpeakers(App.Speakers.day2Speakers);
            $("#speaker-list-view").html(html);
        } else {
            var html = renderSpeakers(App.Speakers.day1Speakers);
            $("#speaker-list-view").html(html);
        }

        $("#speakers-list-wrapper").animate({
            scrollTop: 0
        }, "slow");
    }

    $(function () {

        if (isMobile.Android()) {
            document.getElementById('speakers-list-wrapper').style.top = "45px";
        };

        $(".event-date").click(function () {
            $(".event-date").removeClass("active");
            $(this).addClass("active");
            var selectedDay = $(this).attr("data-day");
            renderSpeakersByDay(selectedDay);
        });

        if (App.Speakers.localData) { // load from server first run.

            $.getJSON(App.apiURL + "/speakers", function (result) {
                App.Speakers.allSpeakers = result.payload.data;
                App.Speakers.localData = false;
                renderSpeakersByDay("1");
            });

        } else {

            renderSpeakersByDay("1");

        }


    });
</script>