<style>
    #tap-screen {
        height: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    #center-segment>h1 {
        color: white;
    }
</style>
<div class="ui container center aligned middle aligned animated fadeInUp" id="tap-screen">
    <div style="text-align: center;" id="center-segment">
        <h2 class="ui header orange">
            Tap on the Beacon
            <div class="sub header" style="color:white;">Near a booth to check-in.</div>
        </h2>
        <br>
        <img class="animated pulse infinite" src="img/nfc_beacon.png" width="80">
        <br>
        <div style="margin-top:20px;border-radius: 15px;" class="ui button primary" id="start-nfc-button">Click here to Tap again</div>
    </div>
</div>

<template id="android-message-for-tap">

</template>

<script>
    $(function () {

        // var deviceVersion = device.version;
        // var deviceModel = device.model;

        //alert(deviceModel + " - " +deviceVersion);

        if (isMobile.Android()) {
            $("#start-nfc-button").hide();
        } else {
            $("#start-nfc-button").show();
            startNFCSession();
        }

        $("#start-nfc-button").click(function () {
            startNFCSession();
        });

        App.Events.listen("ndef-message-received", function (data) {
            var nfctext = data.payload;
            var booth_id = parseInt(nfctext.substring(8, nfctext.length));

            UserActivity.checkedInBooth(booth_id, 1);
            var oneBooth = App.Booths.findBooth(booth_id);

            App.publish(data.payload);
            $("#center-segment").html("<h1>Congratulations,<br> You have checkedin at booth<br>" +
                oneBooth.name +
                "</h1>");
        });

        // App.Events.listen("ndef-message-received", function (data) {
        //     //alert(" " + JSON.stringify(data));

        //     App.publish(data.payload);
        //     $("#center-segment").html("<h1>Congratulations, You earned a Woo! coin from " + data.payload +
        //         "</h1>");
        // });
        // App.Events.emit("capture-user-activity-api", {
        //     user_id: App.User.id,
        //     booth_id: booth_id,
        //     checkedin: 1
        // });

    });
</script>